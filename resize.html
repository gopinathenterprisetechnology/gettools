<!DOCTYPE html>
<html>
<head>
<title>Image Resizer</title>
<style>
body{
font-family:Arial;
background:#111;
color:white;
text-align:center;
padding:20px;
}

.container{
background:#1e1e1e;
padding:20px;
border-radius:10px;
max-width:500px;
margin:auto;
}

input{
padding:8px;
margin:5px;
width:120px;
}

button{
padding:10px 20px;
margin-top:10px;
cursor:pointer;
}

#preview{
max-width:100%;
margin-top:20px;
border-radius:10px;
}

</style>
</head>
<body>

<div class="container">

<h2>Resize Image</h2>

<label>Width</label>
<input type="number" id="width">

<label>Height</label>
<input type="number" id="height">

<div id="dpiBox" style="display:none;">
<br>
<label>DPI</label>
<input type="number" id="dpi" value="300">
</div>

<br>
<label>
<input type="checkbox" id="ratio" checked>
Maintain Aspect Ratio
</label>

<br><br>
<button onclick="applyResize()">Resize Now</button>

<img id="preview" style="max-width:100%; display:block; margin:15px auto;">

</div>

<script>

<script>

document.addEventListener("DOMContentLoaded", function(){

let preview = document.getElementById("preview");
let widthInput = document.getElementById("width");
let heightInput = document.getElementById("height");
let dpiBox = document.getElementById("dpiBox");
let dpiInput = document.getElementById("dpi");

let unit = localStorage.getItem("resizeUnit");
let imgSrc = localStorage.getItem("resizeImageData");

if(!imgSrc){
alert("No image found. Upload again.");
return;
}

preview.src = imgSrc;

let originalWidth, originalHeight;

preview.onload = function(){

originalWidth = preview.naturalWidth;
originalHeight = preview.naturalHeight;

if(!originalWidth){
alert("Image dimension not detected");
return;
}

if(unit==="px"){
widthInput.value = originalWidth;
heightInput.value = originalHeight;
}

if(unit==="mm"){
dpiBox.style.display="block";
let dpi=300;
widthInput.value=((originalWidth/dpi)*25.4).toFixed(2);
heightInput.value=((originalHeight/dpi)*25.4).toFixed(2);
}

if(unit==="cm"){
dpiBox.style.display="block";
let dpi=300;
widthInput.value=((originalWidth/dpi)*2.54).toFixed(2);
heightInput.value=((originalHeight/dpi)*2.54).toFixed(2);
}

};

// Maintain ratio
widthInput.addEventListener("input",function(){
if(!document.getElementById("ratio").checked) return;
let ratio = originalHeight/originalWidth;
heightInput.value=(this.value*ratio).toFixed(2);
});

heightInput.addEventListener("input",function(){
if(!document.getElementById("ratio").checked) return;
let ratio = originalWidth/originalHeight;
widthInput.value=(this.value*ratio).toFixed(2);
});

window.applyResize=function(){

let w=widthInput.value;
let h=heightInput.value;
let dpi=dpiInput.value || 300;

if(unit==="mm"){
w=(w/25.4)*dpi;
h=(h/25.4)*dpi;
}

if(unit==="cm"){
w=(w/2.54)*dpi;
h=(h/2.54)*dpi;
}

w=parseInt(w);
h=parseInt(h);

let canvas=document.createElement("canvas");
canvas.width=w;
canvas.height=h;

let ctx=canvas.getContext("2d");
ctx.drawImage(preview,0,0,w,h);

preview.src=canvas.toDataURL("image/jpeg",1);

originalWidth=w;
originalHeight=h;

alert("Image Resized Successfully!");

};

});

</script>

</script>

</body>
</html>
