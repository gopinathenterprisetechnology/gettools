<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Resize Image - GET Tools</title>

<style>
body{
font-family:Arial;
background:#f3f3f3;
text-align:center;
padding:20px;
}

.box{
background:white;
padding:20px;
border-radius:10px;
width:320px;
margin:auto;
box-shadow:0 0 10px rgba(0,0,0,0.1);
}

input{
width:80px;
padding:5px;
margin:5px;
}

button{
background:#5661b3;
color:white;
border:none;
padding:8px 15px;
border-radius:6px;
cursor:pointer;
margin-top:10px;
}
</style>
</head>
<body>

<h2>Resize Image</h2>

<div class="box">

<img id="preview" style="max-width:100%;margin-bottom:15px;"><br>

<div id="dpiBox" style="display:none;">
DPI: <input type="number" id="dpi" value="300"><br>
</div>

Width: <input type="number" id="width">
Height: <input type="number" id="height"><br>

<label>
<input type="checkbox" id="ratio" checked>
Maintain Aspect Ratio
</label>

<br>
<button onclick="applyResize()">Resize Now</button>

</div>

<script>let unit = localStorage.getItem("resizeUnit");
let imgSrc = localStorage.getItem("resizeImageData");

if(!imgSrc){
alert("No image found. Please upload again.");
window.close();
}

let preview=document.getElementById("preview");
preview.src=imgSrc;

let originalWidth, originalHeight;

preview.onload=function(){

originalWidth = preview.naturalWidth;
originalHeight = preview.naturalHeight;

if(!originalWidth || !originalHeight){
alert("Image dimension not found");
return;
}

// PIXEL MODE
if(unit==="px"){
document.getElementById("width").value = originalWidth;
document.getElementById("height").value = originalHeight;
}

// MM MODE
if(unit==="mm"){
document.getElementById("dpiBox").style.display="block";
let dpi=300;
document.getElementById("width").value = ((originalWidth/dpi)*25.4).toFixed(2);
document.getElementById("height").value = ((originalHeight/dpi)*25.4).toFixed(2);
}

// CM MODE
if(unit==="cm"){
document.getElementById("dpiBox").style.display="block";
let dpi=300;
document.getElementById("width").value = ((originalWidth/dpi)*2.54).toFixed(2);
document.getElementById("height").value = ((originalHeight/dpi)*2.54).toFixed(2);
}

};


// Maintain Aspect Ratio
document.getElementById("width").addEventListener("input",function(){

if(!document.getElementById("ratio").checked) return;

let ratio = originalHeight / originalWidth;
document.getElementById("height").value = (this.value * ratio).toFixed(2);

});

document.getElementById("height").addEventListener("input",function(){

if(!document.getElementById("ratio").checked) return;

let ratio = originalWidth / originalHeight;
document.getElementById("width").value = (this.value * ratio).toFixed(2);

});

function applyResize(){

let w=document.getElementById("width").value;
let h=document.getElementById("height").value;
let dpi=document.getElementById("dpi").value || 300;

// Convert if needed
if(unit==="mm"){
w=(w/25.4)*dpi;
h=(h/25.4)*dpi;
}
if(unit==="cm"){
w=(w/2.54)*dpi;
h=(h/2.54)*dpi;
}

w=parseInt(w);
h=parseInt(h);

let canvas=document.createElement("canvas");
canvas.width=w;
canvas.height=h;

let ctx=canvas.getContext("2d");
ctx.drawImage(preview,0,0,w,h);

preview.src=canvas.toDataURL("image/jpeg",1);

// Update original values after resize
originalWidth=w;
originalHeight=h;

alert("Image Resized Successfully!");
}

</script>

</body>
</html>
