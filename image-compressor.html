<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Advanced Image Compressor - GET Tools</title>

<style>
body{
font-family:Arial;
background:#f3f3f3;
margin:0;
padding:20px;
text-align:center;
}

.dimension-toggle{
display:inline-block;
background:#eee;
padding:8px 15px;
border-radius:20px;
margin-bottom:20px;
}

.dimension-toggle button{
border:none;
background:none;
padding:6px 12px;
cursor:pointer;
font-weight:bold;
}

.dimension-toggle .active{
background:#d6d6d6;
border-radius:15px;
}

.upload-area{
border:3px dashed #8a8ad4;
border-radius:15px;
padding:60px;
margin-bottom:20px;
background:white;
cursor:pointer;
}

.card{
width:300px;
margin:auto;
background:#49799c;
color:white;
border-radius:10px;
display:none;
overflow:hidden;
}

.preview-box{
background:white;
padding:15px;
position:relative;
}

.preview-box img{
max-width:100%;
}

.top-btn{
position:absolute;
top:10px;
left:10px;
}

.top-btn button{
background:#3b6e90;
color:white;
border:none;
padding:5px 10px;
margin:3px;
border-radius:20px;
cursor:pointer;
font-size:12px;
}

.close-btn{
position:absolute;
top:10px;
right:10px;
cursor:pointer;
font-weight:bold;
}

.info{
padding:15px;
text-align:left;
}

.controls{
margin-top:30px;
}

.reduce-btn{
background:#5661b3;
color:white;
border:none;
padding:10px 20px;
border-radius:6px;
cursor:pointer;
}
</style>
</head>
<body>

<div class="dimension-toggle">
Image Dimensions:-
<button class="active" onclick="setUnit('px',this)">Pixels</button>
<button onclick="setUnit('mm',this)">MM</button>
<button onclick="setUnit('cm',this)">CM</button>
</div>

<div class="upload-area" onclick="fileInput.click()">
Click or Drag Image Here
<input type="file" id="fileInput" accept="image/*" hidden>
</div>

<div class="card" id="card">

<div class="preview-box">
<div class="top-btn">
<button onclick="resizeImage()">Resize Pixel</button>
<button onclick="cropImage()">Crop</button>
</div>
<div class="close-btn" onclick="removeImage()">âœ–</div>
<img id="preview">
</div>

<div class="info">
<p id="fileName"></p>
<p><strong>Size:</strong> <span id="fileSize"></span></p>
<p><strong>Width:</strong> <span id="imgWidth"></span></p>
<p><strong>Height:</strong> <span id="imgHeight"></span></p>
</div>

</div>

<div class="controls">
Size: <input type="number" id="targetSize" value="100" style="width:70px;"> KB
<button class="reduce-btn" onclick="compress()">Reduce Size</button>
</div>

let resizeUnit="px";

function resizeImage(){
if(!originalFile){
alert("Upload image first");
return;
}
document.getElementById("resizeModal").style.display="flex";
document.getElementById("resizeWidth").value=imgWidthPx;
document.getElementById("resizeHeight").value=imgHeightPx;
}

function closeResize(){
document.getElementById("resizeModal").style.display="none";
}

function setResizeUnit(unit){
resizeUnit=unit;

document.getElementById("unitLabelW").innerText=unit.toUpperCase();
document.getElementById("unitLabelH").innerText=unit.toUpperCase();

document.getElementById("dpiSection").style.display=
(unit==="px")?"none":"block";
}

function applyResize(){

let w=parseFloat(document.getElementById("resizeWidth").value);
let h=parseFloat(document.getElementById("resizeHeight").value);
let dpi=parseFloat(document.getElementById("dpiInput").value);

if(resizeUnit==="mm"){
w=(w/25.4)*dpi;
h=(h/25.4)*dpi;
}

if(resizeUnit==="cm"){
w=(w/2.54)*dpi;
h=(h/2.54)*dpi;
}

let reader=new FileReader();
reader.onload=function(e){

let img=new Image();
img.src=e.target.result;

img.onload=function(){

let canvas=document.createElement("canvas");
canvas.width=w;
canvas.height=h;

let ctx=canvas.getContext("2d");
ctx.drawImage(img,0,0,w,h);

let resized=canvas.toDataURL("image/jpeg",0.95);

document.getElementById("preview").src=resized;

imgWidthPx=w;
imgHeightPx=h;

updateDimensions();

closeResize();
};
};
reader.readAsDataURL(originalFile);
}

/* Maintain Aspect Ratio */
document.getElementById("resizeWidth").addEventListener("input",function(){
if(document.getElementById("lockRatio").checked){
let ratio=imgHeightPx/imgWidthPx;
document.getElementById("resizeHeight").value=
(this.value*ratio).toFixed(0);
}
});

  
<script>


  
let originalFile;
let currentUnit="px";
let imgWidthPx, imgHeightPx;

const fileInput=document.getElementById("fileInput");

fileInput.addEventListener("change",function(e){
let file=e.target.files[0];
if(!file) return;

originalFile=file;

let reader=new FileReader();
reader.onload=function(event){

let img=new Image();
img.src=event.target.result;

img.onload=function(){

imgWidthPx=img.width;
imgHeightPx=img.height;

document.getElementById("preview").src=event.target.result;
document.getElementById("fileName").innerText=file.name;
document.getElementById("fileSize").innerText=(file.size/1024).toFixed(2)+" KB";

updateDimensions();

document.getElementById("card").style.display="block";
};
};
reader.readAsDataURL(file);
});

function setUnit(unit,btn){
currentUnit=unit;
document.querySelectorAll(".dimension-toggle button").forEach(b=>b.classList.remove("active"));
btn.classList.add("active");
updateDimensions();
}

function updateDimensions(){
let w=imgWidthPx;
let h=imgHeightPx;

if(currentUnit==="mm"){
w=(w*0.2646).toFixed(1);
h=(h*0.2646).toFixed(1);
}
if(currentUnit==="cm"){
w=(w*0.02646).toFixed(2);
h=(h*0.02646).toFixed(2);
}

document.getElementById("imgWidth").innerText=w+" "+currentUnit.toUpperCase();
document.getElementById("imgHeight").innerText=h+" "+currentUnit.toUpperCase();
}

function removeImage(){
document.getElementById("card").style.display="none";
fileInput.value="";
}

function resizeImage(){
alert("Resize feature UI can be expanded here");
}

function cropImage(){
alert("Crop feature can be integrated with canvas crop system");
}

function compress(){

if(!originalFile){
alert("Upload image first");
return;
}

let targetKB=document.getElementById("targetSize").value;
let maxBytes=targetKB*1024;

let reader=new FileReader();
reader.onload=function(e){

let img=new Image();
img.src=e.target.result;

img.onload=function(){

let canvas=document.createElement("canvas");
canvas.width=img.width;
canvas.height=img.height;
let ctx=canvas.getContext("2d");
ctx.drawImage(img,0,0);

let quality=0.9;
let compressed=canvas.toDataURL("image/jpeg",quality);

while((compressed.length*3/4)>maxBytes && quality>0.1){
quality-=0.05;
compressed=canvas.toDataURL("image/jpeg",quality);
}

document.getElementById("preview").src=compressed;
};
};
reader.readAsDataURL(originalFile);
}

</script>
<!-- Resize Modal -->
<div id="resizeModal" style="display:none;position:fixed;inset:0;background:rgba(0,0,0,.5);align-items:center;justify-content:center;">
<div style="background:#fff;padding:25px;border-radius:10px;width:350px;text-align:center;position:relative;">

<h3>Resize Image In</h3>

<div style="margin-bottom:15px;">
<button onclick="setResizeUnit('px')" id="btnPx">Pixels</button>
<button onclick="setResizeUnit('mm')" id="btnMm">MM (Millimeter)</button>
<button onclick="setResizeUnit('cm')" id="btnCm">CM (Centimeter)</button>
</div>

<p style="font-size:13px;color:#555;">
Please enter the width and height of the image you wish to resize
</p>

<label>
<input type="checkbox" id="lockRatio" checked> Maintain Aspect Ratio
</label>

<div id="dpiSection" style="margin-top:10px;">
DPI: <input type="number" id="dpiInput" value="300" style="width:60px;">
</div>

<div style="margin-top:15px;">
Width:
<input type="number" id="resizeWidth" style="width:70px;">
<span id="unitLabelW">PX</span>

Height:
<input type="number" id="resizeHeight" style="width:70px;">
<span id="unitLabelH">PX</span>
</div>

<div style="margin-top:20px;">
<button onclick="applyResize()">Resize Image</button>
<button onclick="closeResize()" style="background:#d6336c;color:white;">Cancel</button>
</div>

</div>
</div>
</body>
</html>
