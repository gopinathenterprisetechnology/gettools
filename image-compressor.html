<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Image Compressor Pro v2.0</title>
<style>
body{
margin:0;
font-family:Segoe UI;
background:#0f172a;
color:white;
display:flex;
justify-content:center;
align-items:center;
min-height:100vh;
}

.container{
width:900px;
background:#1e293b;
padding:25px;
border-radius:15px;
box-shadow:0 0 30px rgba(0,0,0,0.5);
}

h1{
text-align:center;
margin-bottom:20px;
}

.drop-zone{
border:2px dashed #38bdf8;
padding:30px;
text-align:center;
cursor:pointer;
border-radius:10px;
margin-bottom:20px;
}

.preview-area{
display:flex;
gap:20px;
margin-top:20px;
}

.preview-box{
flex:1;
background:#0f172a;
padding:10px;
border-radius:10px;
text-align:center;
}

.preview-box img{
max-width:100%;
max-height:250px;
}
<script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
.controls{
margin-top:20px;
display:grid;
grid-template-columns:1fr 1fr;
gap:15px;
}

input,select{
padding:8px;
border-radius:5px;
border:none;
}

button{
padding:10px;
border:none;
border-radius:6px;
cursor:pointer;
background:#38bdf8;
color:black;
font-weight:bold;
}

button:hover{
background:#0ea5e9;
}

.footer{
margin-top:15px;
text-align:center;
font-size:14px;
color:#94a3b8;
}
</style>
</head>
<body>

<div class="container">
<h1>Image Compressor Pro v2.0</h1>

<div class="drop-zone" id="dropZone">
Click or Drag Image Here
<input type="file" id="fileInput" hidden>
</div>

<div class="preview-area">
<div class="preview-box">
<h3>Original</h3>
<img id="originalPreview">
<p id="originalSize"></p>
</div>

<div class="preview-box">
<h3>Compressed</h3>
<img id="compressedPreview">
<p id="compressedSize"></p>
</div>
</div>

<div class="controls">
<div>
<label>Quality (JPG/WEBP)</label>
<input type="range" id="quality" min="0.1" max="1" step="0.1" value="0.8">
</div>

<div>
<label>Format</label>
<select id="format">
<option value="image/jpeg">JPG</option>
<option value="image/webp">WEBP</option>
<option value="image/png">PNG</option>
</select>
</div>

<div>
<label>Resize Unit</label>
<select id="unit">
<option value="px">Pixel</option>
<option value="mm">Millimeter</option>
<option value="cm">Centimeter</option>
</select>
</div>

<div>
<label>DPI (mm/cm only)</label>
<input type="number" id="dpi" value="300">
</div>

<div>
<label>Width</label>
<input type="number" id="width">
</div>

<div>
<label>Height</label>
<input type="number" id="height">
</div>

<div>
<label><input type="checkbox" id="ratio" checked> Maintain Aspect Ratio</label>
</div>

<div>
<button onclick="compressImage()">Compress</button>
<button onclick="downloadImage()">Download</button>
<button onclick="downloadAll()">Download All(ZIP)</button>
<button onclick="resetAll()">Reset</button>
</div>

</div>

<div class="footer">
Professional Image Compressor â€“ Upgrade Edition
</div>

</div>

<script>
const dropZone = document.getElementById("dropZone");
const fileInput = document.getElementById("fileInput");

// Click to open file
dropZone.addEventListener("click", () => {
    fileInput.click();
});

// File select
fileInput.addEventListener("change", function(e){
    if(e.target.files.length > 0){
        loadImage(e.target.files[0]);
    }
});

// Drag over effect
dropZone.addEventListener("dragover", function(e){
    e.preventDefault();
    dropZone.style.borderColor = "#22c55e";
});

// Drag leave
dropZone.addEventListener("dragleave", function(){
    dropZone.style.borderColor = "#38bdf8";
});

// Drop file
dropZone.addEventListener("drop", function(e){
    e.preventDefault();
    dropZone.style.borderColor = "#38bdf8";

    if(e.dataTransfer.files.length > 0){
        loadImage(e.dataTransfer.files[0]);
    }
});

let images = [];
let compressedImages = [];

const dropZone = document.getElementById("dropZone");
const fileInput = document.getElementById("fileInput");
fileInput.multiple = true;

// CLICK
dropZone.addEventListener("click", () => fileInput.click());

// FILE SELECT
fileInput.addEventListener("change", function(e){
handleFiles(e.target.files);
});

// DRAG
dropZone.addEventListener("dragover", e=>{
e.preventDefault();
dropZone.style.borderColor="#22c55e";
});

dropZone.addEventListener("dragleave", ()=>{
dropZone.style.borderColor="#38bdf8";
});

dropZone.addEventListener("drop", e=>{
e.preventDefault();
dropZone.style.borderColor="#38bdf8";
handleFiles(e.dataTransfer.files);
});


function handleFiles(files){
images=[];
compressedImages=[];
document.getElementById("compressedPreview").innerHTML="";
document.getElementById("originalPreview").innerHTML="";

Array.from(files).forEach(file=>{
const reader=new FileReader();
reader.onload=function(e){
let img=new Image();
img.onload=function(){
images.push({
file:file,
image:img,
width:img.width,
height:img.height
});
createPreview(img,file);
};
img.src=e.target.result;
};
reader.readAsDataURL(file);
});
}


function createPreview(img,file){

let container=document.createElement("div");
container.style.marginBottom="20px";

let original=document.createElement("img");
original.src=img.src;
original.style.maxWidth="200px";

let compressBtn=document.createElement("button");
compressBtn.innerText="Compress";
compressBtn.onclick=()=>compressSingle(img,file,container);

container.appendChild(original);
container.appendChild(document.createElement("br"));
container.appendChild(compressBtn);

document.querySelector(".preview-area").appendChild(container);
}


// SINGLE COMPRESS
async function compressSingle(img,file,container){

let canvas=document.createElement("canvas");
let ctx=canvas.getContext("2d");

let unit=document.getElementById("unit").value;
let dpi=document.getElementById("dpi").value;
let targetKB=document.querySelector("input[placeholder='Target Size (KB)']").value;

let w=img.width;
let h=img.height;

canvas.width=w;
canvas.height=h;
ctx.drawImage(img,0,0,w,h);

let format=document.getElementById("format").value;
let blob;

if(targetKB){

let targetBytes=targetKB*1024;

for(let q=0.9;q>0.1;q-=0.05){
blob=await new Promise(resolve=>{
canvas.toBlob(resolve,format,q);
});
if(blob.size<=targetBytes) break;
}
}else{

let quality=document.getElementById("quality").value;
blob=await new Promise(resolve=>{
canvas.toBlob(resolve,format,quality);
});
}

compressedImages.push({
name:file.name,
blob:blob
});

let compressedImg=document.createElement("img");
compressedImg.src=URL.createObjectURL(blob);
compressedImg.style.maxWidth="200px";

let downloadBtn=document.createElement("button");
downloadBtn.innerText="Download";
downloadBtn.onclick=()=>{
let a=document.createElement("a");
a.href=URL.createObjectURL(blob);
a.download="compressed_"+file.name;
a.click();
};

container.appendChild(document.createElement("br"));
container.appendChild(compressedImg);
container.appendChild(document.createElement("br"));
container.appendChild(downloadBtn);

}


// DOWNLOAD ALL
async function downloadAll(){

if(compressedImages.length===0){
alert("Compress images first!");
return;
}

let zip=new JSZip();

compressedImages.forEach(item=>{
zip.file("compressed_"+item.name,item.blob);
});

let content=await zip.generateAsync({type:"blob"});

let a=document.createElement("a");
a.href=URL.createObjectURL(content);
a.download="All_Compressed_Images.zip";
a.click();
}


</script>

</body>
</html>
