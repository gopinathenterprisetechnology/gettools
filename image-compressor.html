<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Professional Resize Tool</title>

<style>
body{
font-family:Arial;
text-align:center;
background:#f2f2f2;
padding:20px;
}

.unit-toggle button{
padding:8px 15px;
border:none;
margin:5px;
border-radius:20px;
cursor:pointer;
background:#ddd;
}

.unit-toggle .active{
background:#4a56a6;
color:white;
}

.controls{
margin-top:20px;
}

input{
padding:6px;
width:80px;
}

button{
padding:10px 20px;
margin:10px;
border:none;
border-radius:6px;
cursor:pointer;
}

.resize-btn{
background:#4a56a6;
color:white;
}

.cancel-btn{
background:#e91e63;
color:white;
}

img{
max-width:300px;
margin-top:20px;
}
</style>
</head>

<body>

<h3>Resize Image In</h3>

<div class="unit-toggle">
<button class="active" onclick="setUnit('px',this)">Pixels</button>
<button onclick="setUnit('mm',this)">MM (Millimeter)</button>
<button onclick="setUnit('cm',this)">CM (Centimeter)</button>
</div>

<br>

<input type="file" id="upload" accept="image/*">

<br><br>

<img id="preview">

<div class="controls">

<p>Maintain Aspect Ratio 
<input type="checkbox" id="aspect" checked>
</p>

DPI: <input type="number" id="dpi" value="300">

<br><br>

Width: <input type="number" id="width">
Height: <input type="number" id="height">

<br>

<button class="resize-btn" onclick="resizeImage()">Resize Image</button>
<button class="cancel-btn" onclick="resetImage()">Cancel</button>

</div>

<script>

let originalImage;
let originalWidth, originalHeight;
let currentUnit="px";

document.getElementById("upload").addEventListener("change",function(e){

let reader=new FileReader();
reader.onload=function(event){

let img=new Image();
img.src=event.target.result;

img.onload=function(){
originalImage=img;
originalWidth=img.width;
originalHeight=img.height;

document.getElementById("preview").src=event.target.result;

updateInputsFromPx(originalWidth,originalHeight);
};

};
reader.readAsDataURL(e.target.files[0]);
});

function setUnit(unit,btn){

currentUnit=unit;

document.querySelectorAll(".unit-toggle button")
.forEach(b=>b.classList.remove("active"));

btn.classList.add("active");

updateInputsFromPx(originalWidth,originalHeight);
}

function pxToUnit(px){
let dpi=document.getElementById("dpi").value;

if(currentUnit==="px") return px;

if(currentUnit==="mm") return (px/dpi*25.4).toFixed(2);

if(currentUnit==="cm") return (px/dpi*2.54).toFixed(2);
}

function unitToPx(value){
let dpi=document.getElementById("dpi").value;

if(currentUnit==="px") return value;

if(currentUnit==="mm") return (value/25.4*dpi);

if(currentUnit==="cm") return (value/2.54*dpi);
}

function updateInputsFromPx(w,h){
document.getElementById("width").value=pxToUnit(w);
document.getElementById("height").value=pxToUnit(h);
}

document.getElementById("width").addEventListener("input",function(){
if(document.getElementById("aspect").checked){

let ratio=originalHeight/originalWidth;
let newWidthPx=unitToPx(this.value);
let newHeightPx=newWidthPx*ratio;

document.getElementById("height").value=pxToUnit(newHeightPx);
}
});

document.getElementById("height").addEventListener("input",function(){
if(document.getElementById("aspect").checked){

let ratio=originalWidth/originalHeight;
let newHeightPx=unitToPx(this.value);
let newWidthPx=newHeightPx*ratio;

document.getElementById("width").value=pxToUnit(newWidthPx);
}
});

function resizeImage(){

let wPx=unitToPx(document.getElementById("width").value);
let hPx=unitToPx(document.getElementById("height").value);

let canvas=document.createElement("canvas");
canvas.width=wPx;
canvas.height=hPx;

let ctx=canvas.getContext("2d");
ctx.drawImage(originalImage,0,0,wPx,hPx);

document.getElementById("preview").src=canvas.toDataURL("image/jpeg",0.9);
}

function resetImage(){
updateInputsFromPx(originalWidth,originalHeight);
document.getElementById("preview").src=originalImage.src;
}

</script>

</body>
</html>
