<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Professional Image Tool - GET Tools</title>

<style>
:root{
--bg:#f4f6ff;
--card:#fff;
--text:#222;
--primary:#5661b3;
}
body.dark{
--bg:#121212;
--card:#1e1e1e;
--text:#fff;
--primary:#8b5cf6;
}
body{
font-family:Arial;
background:var(--bg);
color:var(--text);
margin:0;
padding:20px;
text-align:center;
transition:.3s;
}
header{
display:flex;
justify-content:space-between;
align-items:center;
margin-bottom:20px;
}
.toggle{
cursor:pointer;
font-size:18px;
}
.upload-box{
border:3px dashed #8a8ad4;
padding:60px;
border-radius:15px;
background:var(--card);
cursor:pointer;
}
.card{
max-width:400px;
margin:20px auto;
background:#49799c;
color:white;
border-radius:10px;
display:none;
overflow:hidden;
}
.card img{
max-width:100%;
}
.info{
padding:15px;
text-align:left;
}
button{
padding:8px 15px;
border:none;
background:var(--primary);
color:white;
border-radius:6px;
cursor:pointer;
margin:5px;
}
.controls{
margin-top:20px;
}
.compare-wrapper{
position:relative;
max-width:400px;
margin:auto;
overflow:hidden;
display:none;
}
#afterImg{
position:absolute;
top:0;
left:0;
width:50%;
overflow:hidden;
}
.slider{
position:absolute;
top:0;
left:50%;
width:3px;
height:100%;
background:red;
cursor:ew-resize;
}
</style>
</head>

<body>

<header>
<h2>GET Tools - Image Pro Editor</h2>
<div class="toggle" onclick="toggleMode()">ðŸŒ™</div>
</header>

<div class="upload-box" id="dropZone">
Drag & Drop or Click to Upload
<input type="file" id="fileInput" accept="image/*" hidden>
</div>

<div class="card" id="card">
<img id="preview">
<div class="info">
<p id="fileName"></p>
<p>Size: <span id="fileSize"></span></p>
<p>Width: <span id="imgWidth"></span></p>
<p>Height: <span id="imgHeight"></span></p>
</div>
</div>

<div class="controls">
Size: <input type="number" id="targetSize" value="100"> KB
<button onclick="compress()">Compress</button>
<button onclick="download()">Download</button>
</div>

<div class="compare-wrapper" id="compareBox">
<img id="beforeImg">
<img id="afterImg">
<div class="slider" id="slider"></div>
</div>

<script>

let originalFile, compressedData;

function toggleMode(){
document.body.classList.toggle("dark");
}

const dropZone=document.getElementById("dropZone");
const fileInput=document.getElementById("fileInput");

dropZone.onclick=()=>fileInput.click();

dropZone.addEventListener("dragover",e=>{
e.preventDefault();
});

dropZone.addEventListener("drop",e=>{
e.preventDefault();
fileInput.files=e.dataTransfer.files;
loadImage(e.dataTransfer.files[0]);
});

fileInput.addEventListener("change",e=>{
loadImage(e.target.files[0]);
});

function loadImage(file){
if(!file) return;
originalFile=file;

let reader=new FileReader();
reader.onload=function(e){

let img=new Image();
img.src=e.target.result;

img.onload=function(){

document.getElementById("preview").src=e.target.result;
document.getElementById("beforeImg").src=e.target.result;

document.getElementById("fileName").innerText=file.name;
document.getElementById("fileSize").innerText=(file.size/1024).toFixed(2)+" KB";
document.getElementById("imgWidth").innerText=img.width+" PX";
document.getElementById("imgHeight").innerText=img.height+" PX";

document.getElementById("card").style.display="block";
};

};
reader.readAsDataURL(file);
}

function compress(){

let targetKB=document.getElementById("targetSize").value;
let maxBytes=targetKB*1024;

let reader=new FileReader();
reader.onload=function(e){

let img=new Image();
img.src=e.target.result;

img.onload=function(){

let canvas=document.createElement("canvas");
canvas.width=img.width;
canvas.height=img.height;

let ctx=canvas.getContext("2d");
ctx.drawImage(img,0,0);

let low=0.1,high=1,mid;

for(let i=0;i<20;i++){
mid=(low+high)/2;
let data=canvas.toDataURL("image/jpeg",mid);
let size=(data.length*3)/4;
if(size>maxBytes){
high=mid;
}else{
low=mid;
compressedData=data;
}
}

document.getElementById("afterImg").src=compressedData;
document.getElementById("compareBox").style.display="block";

};
};
reader.readAsDataURL(originalFile);
}

function download(){
if(!compressedData){
alert("Compress first");
return;
}
let a=document.createElement("a");
a.href=compressedData;
a.download="compressed.jpg";
a.click();
}

/* Compare Slider */
const slider=document.getElementById("slider");
slider.addEventListener("mousedown",function(e){
document.onmousemove=function(e){
let rect=slider.parentElement.getBoundingClientRect();
let x=e.clientX-rect.left;
slider.style.left=x+"px";
document.getElementById("afterImg").style.width=x+"px";
};
document.onmouseup=function(){
document.onmousemove=null;
};
});

</script>

</body>
</html>
